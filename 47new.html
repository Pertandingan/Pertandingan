<!DOCTYPE html>
<html>

<head>
    <title>Snake Game</title>
    <style>
        #gameCanvas {
            border: 1px solid black;
        }
    </style>
</head>

<body>
    <canvas id="gameCanvas" width="400" height="400"></canvas>
    <script>
        const canvas = document.getElementById('gameCanvas');
        const ctx = canvas.getContext('2d');

        const scale = 20;
        const rows = canvas.height / scale;
        const columns = canvas.width / scale;

        const snake = {
            x: 0,
            y: 0,
            dx: scale,
            dy: 0,
            speed: 200,
            color: 'black',
            tail: []
        };

        const food = {
            x: getRandomLocation(),
            y: getRandomLocation(),
            color: 'red'
        };

        const enemy = {
            x: getRandomLocation(),
            y: getRandomLocation(),
            color: 'blue'
        };

        function getRandomLocation() {
            return Math.floor(Math.random() * rows) * scale;
        }

        function draw() {
            // Clear canvas
            ctx.clearRect(0, 0, canvas.width, canvas.height);

            // Draw snake
            ctx.fillStyle = snake.color;
            ctx.fillRect(snake.x, snake.y, scale, scale);

            // Draw food
            ctx.fillStyle = food.color;
            ctx.fillRect(food.x, food.y, scale, scale);

            // Draw enemy
            ctx.fillStyle = enemy.color;
            ctx.fillRect(enemy.x, enemy.y, scale, scale);
        }

        function update() {
            snake.x += snake.dx;
            snake.y += snake.dy;

            // Check collision with food
            if (snake.x === food.x && snake.y === food.y) {
                food.x = getRandomLocation();
                food.y = getRandomLocation();
            }

            // Move enemy towards the snake
            if (enemy.x < snake.x) enemy.x++;
            if (enemy.x > snake.x) enemy.x--;
            if (enemy.y < snake.y) enemy.y++;
            if (enemy.y > snake.y) enemy.y--;

            // Check collision with enemy
            if (snake.x === enemy.x && snake.y === enemy.y) {
                gameOver();
            }

            // Check boundaries
            if (snake.x < 0 || snake.x >= canvas.width || snake.y < 0 || snake.y >= canvas.height) {
                gameOver();
            }

            // Redraw and continue updating
            draw();
            setTimeout(update, snake.speed);
        }

        function gameOver() {
            alert('Game Over');
            location.reload();
        }

        document.addEventListener('keydown', (e) => {
            const keyPressed = e.key;
            if (keyPressed === 'ArrowUp' && snake.dy === 0) {
                snake.dx = 0;
                snake.dy = -scale;
            }
            if (keyPressed === 'ArrowDown' && snake.dy === 0) {
                snake.dx = 0;
                snake.dy = scale;
            }
            if (keyPressed === 'ArrowLeft' && snake.dx === 0) {
                snake.dx = -scale;
                snake.dy = 0;
            }
            if (keyPressed === 'ArrowRight' && snake.dx === 0) {
                snake.dx = scale;
                snake.dy = 0;
            }
        });

        update();
    </script>
</body>

</html>